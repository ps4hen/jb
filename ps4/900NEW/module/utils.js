import{Int as t}from"./int64.js";export class DieError extends Error{constructor(...t){super(...t),this.name=this.constructor.name}}export function die(t=""){alert("   !!! ПЕРЕЗАГРУЗИТЕ КОНСОЛЬ !!! \n Удерживайте кнопку PS -> Питание -> Перезагрузить"); document.body.innerHTML="<div style='padding: 50px; color:red; font-size:48px'>!!! ПЕРЕЗАГРУЗИТЕ КОНСОЛЬ !!! </div>";}let console=document.getElementById("console");export function log(t=""){console.append('#')}export function clear_log(){console.innerHTML=null}export function align(e,n){e instanceof t||(e=new t(e));let o=e.constructor,r=e.lo&(4294967295&-n);return new o(r,e.hi)}export async function send(t,e,n,o=()=>{}){let r=new File([e],n,{type:"application/octet-stream"}),l=new FormData;l.append("upload",r),log("send");let f=await fetch(t,{method:"POST",body:l});if(!f.ok)throw Error(`Network response was not OK, status: ${f.status}`);o()}export function sleep(t=0){return new Promise(e=>setTimeout(e,t))}export function hex(t){return"0x"+t.toString(16)}export function hex_np(t){return t.toString(16)}export function hexdump(t){let e=-16&t.length,n=t.length-e,o=hex_np((t.length+7&-8)-1).length;function r(t){return 32<=t&&t<=126?String.fromCodePoint(t):"."}function l(t,e,n){return[...t.slice(e,e+n)].map(t=>hex_np(t).padStart(2,"0")).join(" ")}let f=[];for(let i=0;i<e;i+=16){let p=l(t,i,8),s=l(t,i+8,8),u="";for(let c=0;c<16;c++)u+=r(t[c]);f.push([`${p}  ${s}`,u])}if(n){let x=n<=8,a=l(t,e,x?n:8);if(x)for(let h=0;h<8-n;h++)a+=" xx";let d=(()=>{if(x)return Array(8).fill("xx").join(" ");let o=l(t,e+8,n-8);for(let r=0;r<16-n;r++)o+=" xx";return o})(),$="";for(let g=0;g<n;g++)$+=r(t[e+g]);for(let m=0;m<16-n;m++)$+=" ";f.push([`${a}  ${d}`,$])}for(let[w,[_,S]]of f.entries()){let j=hex_np(16*w).padStart(o,"0");log(`${j} | ${_} |${S}|`)}}export function jstr(t){let e="";for(let n of t){if(0===n)break;e+=String.fromCodePoint(n)}return String(e)}